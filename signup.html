<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <title>signup page</title>
    </head>
    <body class="p-3 mb-2 bg-warning text-dark">
        <div class="p-3 mb-2 bg-success text-white text-center align-middle" id="top">
            <h1>Signup Page</h1>
        </div>
        
        <form>
            <div class="form-group row">
                
                <label for="firstname" class="col-sm-2 col-form-label">First Name</label>
                <div class="col-sm-10">
                    <input type="text" id="firstname" placeholder="First Name" class="form-control">
                </div>
            </div>

            <div class="form-group row">
                <label for="lastname" class="col-sm-2 col-form-label">Last Name</label>
                <div class="col-sm-10">
                    <input type="text" id="lastname" placeholder="Last Name" class="form-control">
                </div>
            </div>

            <div class="form-group row">
                <label for="username" class="col-sm-2 col-form-label">Username</label>
                <div class="col-sm-10">
                    <input type="text" id="username" placeholder="username" class="form-control">
                </div>
            </div>
            <div class="form-group row">
                <label for="password" class="col-sm-2 col-form-label">Password</label>
                <div class="col-sm-10">
                    <input type="password" id="password" placeholder="password" class="form-control">
                </div>
            </div>
            <div class="form-group row">
            <input type="button" id="submit" onclick="handleSubmit()" value="submit"  class="btn btn-outline-primary">
            <input type="button" id="submit" onclick="indexDirect()" value="back" class="btn btn-outline-primary">
            </div>

        </form>
        <script type="text/javascript">
            const indexDirect = () => {
                    window.location.href="index.html";
                }
            const handleSubmit = () =>{
                console.log("clicked submit");
                let firstname = document.getElementById("firstname").value;
                let lastname = document.getElementById("lastname").value;
                let username = document.getElementById("username").value;
                let password = document.getElementById("password").value;
                let signup = {firstname:firstname,
                              lastname:lastname,
                              username:username,
                              password:password};
                console.log(signup);
                let signupJSON = JSON.stringify(signup);
                console.log(signupJSON);
                let xhttp = new XMLHttpRequest();

                xhttp.open("POST", "http://localhost:8080/project1/signup");

                xhttp.send(signupJSON);
                
                xhttp.onreadystatechange = function(){
                    if(this.readyState == 4 && this.status == 200){
                        console.log("signup successful");
                        console.log(xhttp.responseText);
                        window.location.href="signupSuccess.html"
                    }
                    console.log(`readyState: ${this.readyState}`);
                    console.log(`status: ${this.status}`);
                }
            }
        </script>
    </body>
    
</html>